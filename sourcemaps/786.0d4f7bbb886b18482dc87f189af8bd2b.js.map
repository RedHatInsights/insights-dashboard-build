{"version":3,"file":"js/786.7b37baf3acd4b5c91b6f.js","mappings":"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","sources":["webpack:///./src/SmartComponents/Remediations/RemediationsEmptyState.js","webpack:///./src/Icons/QuestionIcon.js","webpack:///./src/PresentationalComponents/TimeStamp/TimeStamp.js","webpack:///./src/SmartComponents/Remediations/RunStatus.js","webpack:///./src/SmartComponents/Remediations/RemediationsCard.js"],"sourcesContent":["import './RemediationsEmptyState.scss';\n\nimport { EmptyState, EmptyStateVariant } from '@patternfly/react-core/dist/esm/components/EmptyState/EmptyState';\n\nimport { EmptyStateBody } from '@patternfly/react-core/dist/esm/components/EmptyState/EmptyStateBody';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Title } from '@patternfly/react-core/dist/esm/components/Title/Title';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\n\nexport const RemediationsEmptyState = () => {\n\n    const intl = useIntl();\n\n    return (\n        <EmptyState variant={ EmptyStateVariant.small }>\n            <Title headingLevel='h6' size='md'>\n                { intl.formatMessage(messages.remediationsNoDataTitle)}\n            </Title>\n            <EmptyStateBody>\n                { intl.formatMessage(messages.remediationsNoDataBody)}\n            </EmptyStateBody>\n        </EmptyState>\n    );\n};\n\nRemediationsEmptyState.propTypes = {\n    intl: PropTypes.any\n};\n","import './Icons.scss';\n\nimport QuestionCircleIcon from '@patternfly/react-icons/dist/esm/icons/question-circle-icon';\nimport React from 'react';\n\nconst QuestionIcon = () => <QuestionCircleIcon className=\"insd-c-dashboard__icon-question\"/>;\n\nexport default QuestionIcon;\n","import React from 'react';\nimport propTypes from 'prop-types';\nimport './TimeStamp.scss';\n\nexport const TimeStamp = ({ timestamp }) => (\n    <p className=\"insd-c-dashboard__time-stamp\">\n        { timestamp }\n    </p>\n);\n\nTimeStamp.propTypes = {\n    timestamp: propTypes.string\n};\n\nexport default TimeStamp;\n","import './RunStatus.scss';\n\nimport { DateFormat, Skeleton } from '@redhat-cloud-services/frontend-components';\nimport React, { useEffect, useState } from 'react';\n\nimport API from '../../Utilities/Api';\nimport { Button } from '@patternfly/react-core/dist/esm/components/Button/Button';\nimport CheckCircleIcon from '@patternfly/react-icons/dist/esm/icons/check-circle-icon';\nimport InProgressIcon from '@patternfly/react-icons/dist/esm/icons/in-progress-icon';\nimport PropTypes from 'prop-types';\nimport QuestionIcon from './../../Icons/QuestionIcon';\nimport { REMEDIATIONS_PLAYBOOK_RUNS_FETCH_URL } from '../../AppConstants';\nimport TimeStamp from './../../PresentationalComponents/TimeStamp/TimeStamp';\nimport TimesCircleIcon from '@patternfly/react-icons/dist/esm/icons/times-circle-icon';\nimport { Tooltip } from '@patternfly/react-core/dist/esm/components/Tooltip/Tooltip';\nimport messages from '../../Messages';\nimport { useIntl } from 'react-intl';\nimport { useChromePush } from '../../Utilities/hooks/useChromePush';\n\n// Normalize the status so we don't show all API statuses\nconst normalizeStatus = (status) => ({\n    running: 'running',\n    pending: 'running',\n    acked: 'running',\n    failure: 'failure',\n    canceled: 'failure',\n    success: 'success'\n})[status];\n\n// Render the correct icon based on normalized status\nconst statusIconClass = 'insd-c-remediation__status-icon';\nconst renderStatusIcon = (status) => ({\n    running: <InProgressIcon\n        className={ `${statusIconClass} ${statusIconClass}--running` }\n        aria-label=\"Remediation in progress\" />,\n    success: <CheckCircleIcon\n        className={ `${statusIconClass} ${statusIconClass}--passed` }\n        aria-label=\"Remediation passed\" />,\n    failure: <TimesCircleIcon\n        className={ `${statusIconClass} ${statusIconClass}--failed` }\n        aria-label=\"Remediation failed\" />\n})[status];\n\nconst RunStatus = ({ id, name, index }) => {\n    const [playbookRun, setPlaybookRun] = useState({});\n    const [hasData, setHasData] = useState();\n    const [loaded, setLoaded] = useState();\n    const [isCriticalError, setIsCriticalError] = useState(false);\n\n    const intl = useIntl();\n\n    useEffect(() => {\n        const fetchPlaybookRun = async () => {\n            try {\n                const response = await API.get(`${REMEDIATIONS_PLAYBOOK_RUNS_FETCH_URL}${id}/playbook_runs?limit=1&offset=0&sort=-updated_at`);\n                setPlaybookRun(response.data.data);\n                setLoaded(true);\n                setHasData(response.data.data.length);\n            } catch (error) {\n                setLoaded(false);\n                setHasData(false);\n                setIsCriticalError(true);\n                // eslint-disable-next-line no-console\n                console.error('Error contacting remediations API');\n            }\n        };\n\n        fetchPlaybookRun();\n    }, [id]);\n\n    const navigateTo = useChromePush();\n\n    return <div className=\"insd-c-remediations-container\">\n        <div className=\"insd-c-remediation__status\">\n            { loaded === undefined && <Skeleton size='md' /> }\n            { (loaded && hasData) ?\n                <React.Fragment>\n                    {renderStatusIcon(normalizeStatus(playbookRun[0].status))}\n                    <p className='insd-c-remediation__status-text'>\n                        { intl.formatMessage(messages.remediationsPlaybookStatus, { status: normalizeStatus(playbookRun[0].status) }) }\n                    </p>\n                </React.Fragment>\n                : null\n            }\n            { loaded && !hasData &&\n                <React.Fragment>\n                    <QuestionIcon />\n                    <p>{intl.formatMessage(messages.remediationsPlaybookNoActivity)}</p>\n                </React.Fragment>\n            }\n            { isCriticalError &&\n                <React.Fragment>\n                    <span>{intl.formatMessage(messages.remediationsPlaybookFailure)}</span> {/* TODO Later for absolute failure */}\n                </React.Fragment>\n            }\n        </div>\n        <div className=\"insd-c-remediation__timestamp\">\n            {name.length > 65 ? <Tooltip content={ name }>\n                <Button\n                    id={ `remediation-link-${index}` }\n                    component=\"a\"\n                    variant=\"link\"\n                    isInline\n                    onClick={e => navigateTo(e, `./insights/remediations/${id}`)}\n                    href={ `./insights/remediations/${id}` }\n                >\n                    {name}\n                </Button>\n            </Tooltip> :\n                <Button\n                    id={ `remediation-link-${index}` }\n                    component=\"a\"\n                    variant=\"link\"\n                    isInline\n                    onClick={e => navigateTo(e, `./insights/remediations/${id}`)}\n                    href={ `./insights/remediations/${id}` }\n                >\n                    {name}\n                </Button>}\n            { loaded === undefined && <Skeleton size='md' /> }\n            { loaded && hasData\n                ? <TimeStamp timestamp={ <DateFormat type='exact' date={ playbookRun[0].created_at } /> } />\n                : null\n            }\n        </div>\n    </div>;\n};\n\nRunStatus.propTypes = {\n    id: PropTypes.string,\n    name: PropTypes.string,\n    intl: PropTypes.any,\n    index: PropTypes.any\n};\n\nexport default RunStatus;\n","import './RemediationsCard.scss';\n\nimport * as AppActions from '../../AppActions';\n\nimport React, { useEffect } from 'react';\nimport {\n    TemplateCardActions,\n    TemplateCardBody\n} from '../../PresentationalComponents/Template/TemplateCard';\n\nimport { Button } from '@patternfly/react-core/dist/esm/components/Button/Button';\nimport { ExpandableCardTemplate } from '../../PresentationalComponents/Template/ExpandableCardTemplate';\nimport FailState from '../../PresentationalComponents/FailState/FailState';\nimport PropTypes from 'prop-types';\nimport { RemediationsEmptyState } from './RemediationsEmptyState';\nimport RunStatus from './RunStatus';\nimport { connect } from 'react-redux';\nimport messages from '../../Messages';\nimport routerParams from '@redhat-cloud-services/frontend-components-utilities/RouterParams';\nimport { useIntl } from 'react-intl';\nimport { useChromePush } from '../../Utilities/hooks/useChromePush';\n\nconst RemediationsCard = ({\n    fetchRemediations, remediationsFetchStatus, remediations\n}) => {\n\n    const intl = useIntl();\n\n    useEffect(() => {\n        fetchRemediations();\n    }, [fetchRemediations]);\n\n    const navigateTo = useChromePush();\n\n    return (\n        <ExpandableCardTemplate\n            appName='remediations'\n            className='ins-c-card__remediations insd-m-toggle-right-on-md'\n            title={ intl.formatMessage(messages.remediationsCardHeader) }\n            isExpanded={JSON.parse(localStorage.getItem('dashboard_expanded_remediations') || 'true')}\n            isExpandedCallback={isExpanded => localStorage.setItem('dashboard_expanded_remediations', isExpanded)}\n            header={\n                <TemplateCardActions />\n            }\n            body={\n                <TemplateCardBody>\n                    {remediationsFetchStatus === 'fulfilled' &&\n                        (Array.isArray(remediations.data) &&\n                            (remediations.data.length > 0 ?\n                                <React.Fragment>\n                                    {remediations.data.map((element, index) =>\n                                        <RunStatus id={ element.id } name={ element.name } key={ element.id } index={ index + 1 } />\n                                    )}\n                                    {remediations.meta.total > remediations.meta.count &&\n                                        <div className='insd-c-remediations-container'>\n                                            <div className='insd-c-remediation__status'>\n                                            </div>\n                                            <div className='insd-c-remediation__timestamp'>\n                                                <Button\n                                                    id='remediations-link-more'\n                                                    component='a'\n                                                    onClick={e => navigateTo(e, './insights/remediations')}\n                                                    href='./insights/remediations'\n                                                    variant='link'\n                                                    isInline\n                                                >\n                                                    {intl.formatMessage(messages.remediationsTotal,\n                                                        { total: remediations.meta.total - remediations.meta.count }\n                                                    )}\n                                                </Button>\n                                            </div>\n                                        </div>\n                                    }\n                                </React.Fragment>\n                                : <RemediationsEmptyState />)\n                        )\n                    }\n                    {remediationsFetchStatus === 'rejected' &&\n                        <FailState appName='Remediations' />\n                    }\n                </TemplateCardBody>\n            }\n        />\n    );\n};\n\nRemediationsCard.propTypes = {\n    fetchRemediations: PropTypes.func,\n    remediations: PropTypes.object,\n    remediationsFetchStatus: PropTypes.string,\n    intl: PropTypes.any\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n    remediations: state.DashboardStore.remediations,\n    remediationsFetchStatus: state.DashboardStore.remediationsFetchStatus,\n    ...ownProps\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchRemediations: () => dispatch(AppActions.fetchRemediations())\n});\n\nexport default routerParams(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(RemediationsCard));\n"],"names":["RemediationsEmptyState","intl","useIntl","EmptyState","variant","EmptyStateVariant","Title","headingLevel","size","formatMessage","messages","EmptyStateBody","propTypes","PropTypes","className","TimeStamp","timestamp","normalizeStatus","status","running","pending","acked","failure","canceled","success","statusIconClass","RunStatus","id","name","index","useState","playbookRun","setPlaybookRun","hasData","setHasData","loaded","setLoaded","isCriticalError","setIsCriticalError","useEffect","API","REMEDIATIONS_PLAYBOOK_RUNS_FETCH_URL","response","data","length","console","error","fetchPlaybookRun","navigateTo","useChromePush","undefined","Skeleton","Tooltip","content","Button","component","isInline","onClick","e","href","DateFormat","type","date","created_at","RemediationsCard","fetchRemediations","remediationsFetchStatus","remediations","ExpandableCardTemplate","appName","title","isExpanded","JSON","parse","localStorage","getItem","isExpandedCallback","setItem","header","TemplateCard","body","Array","isArray","map","element","key","meta","total","count","FailState","routerParams","connect","state","ownProps","DashboardStore","dispatch","AppActions"],"sourceRoot":""}