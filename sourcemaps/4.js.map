{"version":3,"sources":["webpack:///./src/SmartComponents/Cards/ComplianceCard.js"],"names":["_react","__webpack_require__","_insightsFrontendComponents","_reactRedux","_reactCore","AppActions","ComplianceCard","props","_classCallCheck3","default","this","_possibleConstructorReturn3","__proto__","Object","getPrototypeOf","call","fetchCompliance","compliance","_props","complianceFetchStatus","complianceSummary","_react2","createElement","Card","className","CardHeader","Title","size","CardBody","Stack","Array","isArray","data","length","slice","map","element","StackItem","gutter","key","id","Split","SplitItem","attributes","score","Gauge","label","name","value","width","height","timeframe","identifier","href","compliant_host_count","total_host_count","_Loading2","CardFooter","Component","propTypes","PropTypes","func","object","string","routerParams","connect","state","ownProps","_extends3","DashboardStore","dispatch","url","fetchComplianceSummary"],"mappings":"2MAAAA,EAAAC,EAAA,cACAA,EAAA,IACAC,EAAAD,EAAA,KACAE,EAAAF,EAAA,IAEAG,EAAAH,EAAA,KAOYI,0JAAZJ,EAAA,UACAA,EAAA,yDAEAA,EAAA,KAIA,IASMK,cAEF,SAAAA,EAAYC,GAAO,SAAAC,EAAAC,SAAAC,KAAAJ,IAAA,EAAAK,EAAAF,SAAAC,MAAAJ,EAAAM,WAAAC,OAAAC,eAAAR,IAAAS,KAAAL,KACTH,wFAING,KAAKH,MAAMS,mDASX,IAAoCC,EAN/BC,EAgBDR,KAAKH,MAFLY,EAdCD,EAcDC,sBACAC,EAfCF,EAeDE,kBAGJ,OACIC,EAAAZ,QAAAa,cAAClB,EAAAmB,KAAD,CAAMC,UAAU,0BACZH,EAAAZ,QAAAa,cAAClB,EAAAqB,WAAD,KACIJ,EAAAZ,QAAAa,cAAClB,EAAAsB,MAAD,CAAOC,KAAM,MAAb,eAEJN,EAAAZ,QAAAa,cAAClB,EAAAwB,SAAD,KACIP,EAAAZ,QAAAa,cAAClB,EAAAyB,MAAD,KACgC,cAA1BV,GACEW,MAAMC,QAAQX,EAAkBY,OAASZ,EAAkBY,KAAKC,OAAS,IApBzDhB,EAqBMG,EApBbH,EAAWe,KAAKC,OAAS,EAAIhB,EAAWe,KAAKE,MAAM,EAAG,GAC3EjB,EAAWe,KAAKE,SAmBqCC,IAAI,SAAAC,GAAA,OACrCf,EAAAZ,QAAAa,cAAClB,EAAAiC,UAAD,CAAWC,OAAO,KAAKC,IAAMH,EAAQI,IACjCnB,EAAAZ,QAAAa,cAAClB,EAAAqC,MAAD,CAAOH,OAAO,KAAKC,IAAMH,EAAQI,IAC7BnB,EAAAZ,QAAAa,cAAClB,EAAAsC,UAAD,CAAWlB,UAAU,sCACjBH,EAAAZ,QAAAa,cAAA,OAAKE,UAAU,mCACkB,IAA3BY,EAAQO,WAAWC,MADzB,KAGAvB,EAAAZ,QAAAa,cAACpB,EAAA2C,MAAD,CAAOC,MAAQV,EAAQO,WAAWI,KAC9BC,MAAmC,IAA3BZ,EAAQO,WAAWC,MAAcK,MAAQ,GAAKC,OAAS,GAC/DC,UAAU,KACVC,WAAA,oBAAkChB,EAAQI,MAElDnB,EAAAZ,QAAAa,cAAClB,EAAAsC,UAAD,KACIrB,EAAAZ,QAAAa,cAAClB,EAAAyB,MAAD,KACIR,EAAAZ,QAAAa,cAAClB,EAAAiC,UAAD,KACIhB,EAAAZ,QAAAa,cAAA,KAAG+B,KAAA,2CAAuDjB,EAAQO,WAAWI,OAEjF1B,EAAAZ,QAAAa,cAAClB,EAAAiC,UAAD,KACMD,EAAQO,WAAWW,qBADzB,QAEYlB,EAAQO,WAAWY,iBAF/B,kBAUA,YAA1BpC,GAAwCE,EAAAZ,QAAAa,cAACkC,EAAA/C,QAAD,QAGlDY,EAAAZ,QAAAa,cAAClB,EAAAqD,WAAD,KACIpC,EAAAZ,QAAAa,cAAA,KAAG+B,KAAA,2CAAH,WACwC,cAA1BlC,GAAyCW,MAAMC,QAAQX,EAAkBY,OAC/EZ,EAAkBY,KAAKC,OAAS,EAD1B,IACkCb,EAAkBY,KAAKC,OADzD,IACqE,IAFnF,gCApESyB,aA+E7BpD,EAAeqD,UAAY,CACvB3C,gBAAiB4C,UAAUC,KAC3BzC,kBAAmBwC,UAAUE,OAC7B3C,sBAAuByC,UAAUG,mBAatB,EAAA7D,EAAA8D,eAAa,EAAA7D,EAAA8D,SAVJ,SAACC,EAAOC,GAAR,SAAAC,EAAA3D,SAAA,CACpBW,kBAAmB8C,EAAMG,eAAejD,kBACxCD,sBAAuB+C,EAAMG,eAAelD,uBACzCgD,IAGoB,SAAAG,GAAA,MAAa,CACpCtD,gBAAiB,SAACuD,GAAD,OAASD,EAASjE,EAAWmE,uBAAuBD,OAG7C,CAG1BjE","file":"js/4.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { routerParams, Gauge } from '@red-hat-insights/insights-frontend-components';\nimport { connect } from 'react-redux';\n\nimport {\n    Card, CardBody, CardFooter, CardHeader,\n    Split, SplitItem,\n    Stack, StackItem,\n    Title\n} from '@patternfly/react-core';\n\nimport * as AppActions from '../../AppActions';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\n\nimport './_cards.scss';\n\n// expose RELEASE\n/*global RELEASE:true*/\nconst release = RELEASE;\n\n/**\n * A smart component that handles all the api calls and data needed by the dumb components.\n * Smart components are usually classes.\n *\n * https://reactjs.org/docs/components-and-props.html\n * https://medium.com/@thejasonfile/dumb-components-and-smart-components-e7b33a698d43\n */\nclass ComplianceCard extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    componentDidMount() {\n        this.props.fetchCompliance();\n    }\n\n    render() {\n\n        /*\n         * Returns the first two -- if there are at least two entries -- items as a shallow copy of\n         * complianceSummary\n         */\n        const getTopTwoPolicies = function (compliance) {\n            const complianceTopTwo = compliance.data.length > 1 ? compliance.data.slice(0, 2) :\n                compliance.data.slice();\n\n            return complianceTopTwo;\n        };\n\n        const {\n            complianceFetchStatus,\n            complianceSummary\n        } = this.props;\n\n        return (\n            <Card className='ins-c-card__compliance'>\n                <CardHeader>\n                    <Title size={'lg'}>Compliance</Title>\n                </CardHeader>\n                <CardBody>\n                    <Stack>\n                        { complianceFetchStatus === 'fulfilled' && (\n                            Array.isArray(complianceSummary.data) && complianceSummary.data.length > 0 && (\n                                getTopTwoPolicies(complianceSummary).map(element =>\n                                    <StackItem gutter='sm' key={ element.id }>\n                                        <Split gutter='md' key={ element.id }>\n                                            <SplitItem className='ins-c-gauge pf-u-text-align-center'>\n                                                <div className='ins-c-gauge__metrics-percentage'>\n                                                    { element.attributes.score * 100 }%\n                                                </div>\n                                                <Gauge label={ element.attributes.name }\n                                                    value={ element.attributes.score * 100 } width={ 82 } height={ 82 }\n                                                    timeframe='30'\n                                                    identifier={ `compliance-gauge-${ element.id }` } />\n                                            </SplitItem>\n                                            <SplitItem>\n                                                <Stack>\n                                                    <StackItem>\n                                                        <a href={ `/${release}/platform/compliance/policies/` }>{ element.attributes.name }</a>\n                                                    </StackItem>\n                                                    <StackItem>\n                                                        { element.attributes.compliant_host_count } of\n                                                        &nbsp;{ element.attributes.total_host_count } systems</StackItem>\n                                                </Stack>\n                                            </SplitItem>\n                                        </Split>\n                                    </StackItem>\n                                )\n                            )\n                        ) }\n                        { complianceFetchStatus === 'pending' && (<Loading/>) }\n                    </Stack>\n                </CardBody>\n                <CardFooter>\n                    <a href={ `/${release}/platform/compliance/policies/` }>\n                        View All{ complianceFetchStatus === 'fulfilled' && Array.isArray(complianceSummary.data) &&\n                            complianceSummary.data.length > 1 ? ` ${complianceSummary.data.length} ` : ' '}\n                            Compliance Policies\n                    </a>\n                </CardFooter>\n            </Card>\n        );\n    }\n}\n\nComplianceCard.propTypes = {\n    fetchCompliance: PropTypes.func,\n    complianceSummary: PropTypes.object,\n    complianceFetchStatus: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n    complianceSummary: state.DashboardStore.complianceSummary,\n    complianceFetchStatus: state.DashboardStore.complianceFetchStatus,\n    ...ownProps\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchCompliance: (url) => dispatch(AppActions.fetchComplianceSummary(url))\n});\n\nexport default routerParams(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(ComplianceCard));\n"],"sourceRoot":""}