{"version":3,"sources":["webpack:///./src/SmartComponents/Cards/InsightsCard.js"],"names":["_react","__webpack_require__","_insightsFrontendComponents","_reactRedux","_reactIcons","_reactCore","AppActions","InsightsCard","props","_classCallCheck3","default","this","_possibleConstructorReturn3","__proto__","Object","getPrototypeOf","call","fetchInsights","_props","insightsFetchStatus","insights","severities","Array","id","label","link","some","element","rules","total_risk","push","value","length","_react2","createElement","Card","className","CardHeader","Title","size","CardBody","isArray","map","key","ExclamationCircleIcon","ExclamationTriangleIcon","ExclamationIcon","getIcon","href","_Loading2","CheckCircleIcon","CardFooter","total","Component","propTypes","PropTypes","func","object","string","routerParams","connect","state","ownProps","_extends3","DashboardStore","dispatch","url"],"mappings":"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","file":"js/6.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { routerParams } from '@red-hat-insights/insights-frontend-components';\nimport { connect } from 'react-redux';\n\nimport {\n    CheckCircleIcon,\n    ExclamationCircleIcon, ExclamationTriangleIcon, ExclamationIcon\n} from '@patternfly/react-icons';\n\nimport {\n    Card, CardBody, CardFooter, CardHeader,\n    Title\n} from '@patternfly/react-core';\n\nimport * as AppActions from '../../AppActions';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\n\nimport './_cards.scss';\n\n// expose RELEASE\n/*global RELEASE:true*/\nconst release = RELEASE;\n\n/**\n * Insights for showing 2 highest categories with rule hits\n */\nclass InsightsCard extends Component {\n\n    constructor (props) {\n        super(props);\n    }\n\n    componentDidMount () {\n        this.props.fetchInsights();\n    }\n\n    render() {\n        const {\n            insightsFetchStatus,\n            insights\n        } = this.props;\n\n        let severities = new Array();\n\n        if (insightsFetchStatus === 'fulfilled') {\n            // iterate over rules.severities and push to topSeverities if value > 0 in order of greatest to least\n            // break after 2 items have been added\n            [\n                { id: 4, label: 'Critical', link: 'critical-risk/' },\n                { id: 3, label: 'High', link: 'high-risk/' },\n                { id: 2, label: 'Medium', link: 'medium-risk/' },\n                { id: 1, label: 'Low', link: 'low-risk/' }\n            ].some(element => {\n                if (insights.rules.total_risk[element.id] > 0) {\n                    severities.push({\n                        label: element.label,\n                        value: insights.rules.total_risk[element.id],\n                        link: element.link\n                    });\n                    if (severities.length > 1) {\n                        return true;\n                    }\n                }\n            });\n        }\n\n        function getIcon (label) {\n            switch (label) {\n                case 'Critical':\n                    return <ExclamationCircleIcon className='ins-c-summary__icon ins-c-summary__icon-critical' />;\n                case 'High':\n                    return <ExclamationTriangleIcon className='ins-c-summary__icon ins-c-summary__icon-high' />;\n                case 'Medium':\n                    return <ExclamationTriangleIcon className='ins-c-summary__icon ins-c-summary__icon-medium' />;\n                case 'Low':\n                    return <ExclamationIcon className='ins-c-summary__icon ins-c-summary__icon-low' />;\n            }\n        }\n\n        return (\n            <Card className='ins-c-card__insights'>\n                <CardHeader>\n                    <Title className=\"pf-u-mt-0 pf-u-mb-0\" size={'lg'}>Insights</Title>\n                </CardHeader>\n                <CardBody>\n                    { insightsFetchStatus === 'fulfilled' && Array.isArray(severities) && severities.length > 0 && (\n                        severities.map(element =>\n                            <div className='ins-c-summary' key={ element.label }>\n                                { getIcon(element.label) }\n                                <span className='ins-c-summary__emphasis'>{ element.value }</span>\n                                <span className='ins-c-summary__label'>\n                                    <a href={ `/${ release }/platform/advisor/actions/${ element.link }` }>{ element.label } Risk Rule Hits</a>\n                                </span>\n                            </div>\n                        )\n                    ) }\n                    { insightsFetchStatus === 'pending' && (<Loading/>) }\n                    { insightsFetchStatus === 'fulfilled' && (!Array.isArray(severities) || severities.length === 0) && (\n                        <div className='ins-c-summary'>\n                            <CheckCircleIcon className='ins-c-summary__icon ins-c-summary__icon-check' />\n                            <span className='ins-c-summary__label'>You have no issues</span>\n                        </div>\n                    ) }\n                </CardBody>\n                <CardFooter>\n                    <a href={ `/${ release }/platform/advisor/` }>\n                        View All{ insights.rules && insights.rules.total > 0 ?\n                            ` ${insights.rules.total} ` : ''} Rule Hits\n                    </a>\n                </CardFooter>\n            </Card>\n        );\n    }\n}\n\nInsightsCard.propTypes = {\n    fetchInsights: PropTypes.func,\n    insights: PropTypes.object,\n    insightsFetchStatus: PropTypes.string\n};\n\nconst mapStateToProps = (state, ownProps) => ({\n    insights: state.DashboardStore.insights,\n    insightsFetchStatus: state.DashboardStore.insightsFetchStatus,\n    ...ownProps\n});\n\nconst mapDispatchToProps = dispatch => ({\n    fetchInsights: (url) => dispatch(AppActions.fetchInsights(url))\n});\n\nexport default routerParams(connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(InsightsCard));\n"],"sourceRoot":""}