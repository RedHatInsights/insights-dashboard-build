{"version":3,"sources":["webpack:///./src/SmartComponents/Advisor/_Advisor.scss?b1d1","webpack:///./src/SmartComponents/Advisor/Constants.js","webpack:///./src/SmartComponents/Advisor/Advisor.js","webpack:///./src/SmartComponents/Advisor/_Advisor.scss"],"names":["api","content","__esModule","default","module","i","options","update","exported","locals","hot","accept","newContent","dispose","exports","SEVERITY_MAP","critical","important","moderate","low","Advisor","recStats","recStatsStatus","advisorFetchStatsRecs","advisorFetchStatsSystems","advisorIncidents","advisorIncidentsStatus","advisorFetchIncidents","systemsStats","systemsStatsStatus","intl","useState","chartData","setChartData","getLatestData","useCallback","data","total_risk","dataChart","name","formatMessage","messages","y","useEffect","TemplateCard","appName","title","Loading","NumberDescription","meta","count","dataSize","layout","linkDescription","incidentsDetected","incidents","link","UI_BASE","StackChartTemplate","ariaDesc","ariaTitle","height","width","maxWidth","legendHeight","legendWidth","legendClick","target","mutation","risk","datum","split","toLowerCase","window","location","href","Fragment","recsImpactingSystems","totalRecs","total","systems","propTypes","PropTypes","func","object","string","any","injectIntl","connect","DashboardStore","advisorStatsRecs","advisorStatsRecsStatus","advisorStatsSystems","advisorStatsSystemsStatus","dispatch","url","AppActions","___CSS_LOADER_API_IMPORT___","push"],"mappings":"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","file":"js/14.js","sourcesContent":["var api = require(\"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./_Advisor.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\nvar exported = content.locals ? content.locals : {};\n\n\nif (module.hot) {\n  if (!content.locals) {\n    module.hot.accept(\n      \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./_Advisor.scss\",\n      function () {\n        var newContent = require(\"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./_Advisor.scss\");\n\n              newContent = newContent.__esModule ? newContent.default : newContent;\n\n              if (typeof newContent === 'string') {\n                newContent = [[module.id, newContent, '']];\n              }\n\n              update(newContent);\n      }\n    )\n  }\n\n  module.hot.dispose(function() { \n    update();\n  });\n}\n\nmodule.exports = exported;","export const INCIDENT_URL = `/advisor/recommendations?reports_shown=undefined&impacting=false&offset=0&limit=10&sort=-publish_date&incident=true`;\nexport const NEW_REC_URL = `/advisor/recommendations?reports_shown=undefined&impacting=false&offset=0&limit=10&sort=-publish_date`;\n\nexport const SEVERITY_MAP = {\n    critical: 4,\n    important: 3,\n    moderate: 2,\n    low: 1\n};\n","import './_Advisor.scss';\n\nimport * as AppActions from '../../AppActions';\n\nimport { INCIDENT_URL, NEW_REC_URL } from './Constants';\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { TemplateCard, TemplateCardBody, TemplateCardHeader } from '../../PresentationalComponents/Template/TemplateCard';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\nimport PropTypes from 'prop-types';\nimport { UI_BASE } from '../../AppConstants';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport messages from '../../Messages';\nimport { NumberDescription } from '../../PresentationalComponents/NumberDescription/NumberDescription';\nimport StackChartTemplate from '../../ChartTemplates/StackChart/StackChartTemplate';\nimport { SEVERITY_MAP } from './Constants';\n\n/**\n * Advisor Card for showing count/severity of rec hits\n */\nconst Advisor = ({ recStats, recStatsStatus, advisorFetchStatsRecs, advisorFetchStatsSystems,\n    advisorIncidents, advisorIncidentsStatus, advisorFetchIncidents, systemsStats, systemsStatsStatus, intl }) => {\n\n    const [chartData, setChartData] = useState([]);\n\n    const getLatestData = useCallback(() => {\n        if (recStatsStatus === 'fulfilled') {\n            let data = recStats.total_risk;\n            let dataChart = [\n                { name: intl.formatMessage(messages.critical), y: data[SEVERITY_MAP.critical] },\n                { name: intl.formatMessage(messages.important), y: data[SEVERITY_MAP.important] },\n                { name: intl.formatMessage(messages.moderate), y: data[SEVERITY_MAP.moderate] },\n                { name: intl.formatMessage(messages.low), y: data[SEVERITY_MAP.low] }\n            ];\n            setChartData(dataChart);\n        }\n    }, [recStats, recStatsStatus, intl]);\n\n    useEffect(() => {\n        advisorFetchStatsRecs();\n        advisorFetchStatsSystems();\n        advisorFetchIncidents();\n    }, [advisorFetchIncidents, advisorFetchStatsRecs, advisorFetchStatsSystems]);\n\n    useEffect(() => {\n        getLatestData();\n    }, [getLatestData]);\n\n    const legendClick = () => [{\n        target: 'labels',\n        mutation: (data) => {\n            const risk = data.datum.name.split(' ')[1].toLowerCase();\n            window.location.href =\n                `${UI_BASE}/advisor/recommendations?total_risk=${SEVERITY_MAP[risk]}&reports_shown=true&impacting=true&offset=0&limit=10`;\n        }\n    }];\n\n    return <TemplateCard appName='Advisor'>\n        <TemplateCardHeader title='Advisor recommendations' />\n        <TemplateCardBody>\n            {advisorIncidentsStatus !== 'fulfilled' ? <Loading /> :\n                <NumberDescription\n                    data={ advisorIncidents.meta.count }\n                    dataSize=\"md\"\n                    layout=\"horizontal\"\n                    linkDescription={ intl.formatMessage(messages.incidentsDetected, { incidents: advisorIncidents.meta.count }) }\n                    critical={ advisorIncidents.meta.count > 50 ? 'true' : 'false' }\n                    link={ `${UI_BASE}${INCIDENT_URL}` }\n                />\n            }\n            {recStatsStatus !== 'fulfilled' ? <Loading /> :\n                <StackChartTemplate\n                    ariaDesc=\"CVEs impacting your systems\"\n                    ariaTitle=\"Vulnerabilities chart\"\n                    height={ 40 }\n                    width={ 600 }\n                    maxWidth={ 600 }\n                    legendHeight={ 36 }\n                    legendWidth={ 600 }\n                    data={ chartData }\n                    legendClick={ legendClick }\n                />\n            }\n            {systemsStatsStatus !== 'fulfilled' ? <Loading /> :\n                <React.Fragment>\n                    <a href={ `${UI_BASE}${NEW_REC_URL}` }>\n                        {intl.formatMessage(messages.recsImpactingSystems, { totalRecs: recStats.total, systems: systemsStats.total })}\n                    </a>\n                </React.Fragment>}\n        </TemplateCardBody>\n    </TemplateCard>;\n};\n\nAdvisor.propTypes = {\n    advisorFetchStatsRecs: PropTypes.func,\n    recStats: PropTypes.object,\n    recStatsStatus: PropTypes.string,\n    advisorFetchStatsSystems: PropTypes.func,\n    systemsStats: PropTypes.object,\n    systemsStatsStatus: PropTypes.string,\n    advisorIncidents: PropTypes.object,\n    advisorIncidentsStatus: PropTypes.string,\n    advisorFetchIncidents: PropTypes.func,\n    intl: PropTypes.any\n};\n\nexport default injectIntl(connect(\n    ({ DashboardStore }) => ({\n        recStats: DashboardStore.advisorStatsRecs,\n        recStatsStatus: DashboardStore.advisorStatsRecsStatus,\n        systemsStats: DashboardStore.advisorStatsSystems,\n        systemsStatsStatus: DashboardStore.advisorStatsSystemsStatus,\n        advisorIncidents: DashboardStore.advisorIncidents,\n        advisorIncidentsStatus: DashboardStore.advisorIncidentsStatus\n    }),\n    dispatch => ({\n        advisorFetchStatsRecs: (url) => dispatch(AppActions.advisorFetchStatsRecs(url)),\n        advisorFetchStatsSystems: (url) => dispatch(AppActions.advisorFetchStatsSystems(url)),\n        advisorFetchIncidents: (url) => dispatch(AppActions.advisorFetchIncidents(url))\n    })\n)(Advisor));\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".ins-c-dashboard__card--Advisor .pf-c-chart{top:0}.ins-c-dashboard__card--Advisor .stackChartLegend{left:-9px;position:relative}.ins-c-dashboard__card--Advisor a{font-size:small}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n"],"sourceRoot":""}