(self.webpackChunkinsights_dashboard=self.webpackChunkinsights_dashboard||[]).push([[1282],{31876:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},r.apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{c(r.next(e))}catch(e){a(e)}}function s(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}c((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.usePermissionsWithContext=t.usePermissions=void 0;var s=n(93264),c=n(64862);function l(e,t,n,i){var l=this,u=(0,s.useState)({isLoading:!0,hasAccess:!1,isOrgAdmin:!1,permissions:[]}),m=u[0],f=u[1];return(0,s.useEffect)((function(){var s=!1;return f((function(e){return r(r({},e),{isLoading:!0})})),o(l,void 0,void 0,(function(){var r,o,l;return a(this,(function(a){switch(a.label){case 0:return[4,(0,c.getRBAC)(e,n)];case 1:return r=a.sent(),o=r.isOrgAdmin,l=r.permissions,!s&&f({isLoading:!1,isOrgAdmin:o,permissions:l,hasAccess:i?(0,c.hasAllPermissions)(l,t):(0,c.doesHavePermissions)(l,t)}),[2]}}))})),function(){s=!0}}),[e,n]),m}t.usePermissions=l,t.usePermissionsWithContext=function(e,t){var n=(0,s.useContext)(c.RBACContext),o=n.hasAccess,a=i(n,["hasAccess"]);return r(r({},a),{hasAccess:(null==o?void 0:o(e,t))||!1})},t.default=l},64862:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RBACContext:()=>l,default:()=>u,doesHavePermissions:()=>i,getRBAC:()=>o,hasAllPermissions:()=>s,initialPermissions:()=>c});var r=n(93264);function o(e,t){var n,r,o,a,i,s,c,l,u;return void 0===e&&(e=""),void 0===t&&(t=!1),s=this,c=void 0,u=function(){var s,c,l;return function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(u){switch(u.label){case 0:return s=window.insights,[4,null===(r=null===(n=null==s?void 0:s.chrome)||void 0===n?void 0:n.auth)||void 0===r?void 0:r.getUser()];case 1:return c=u.sent(),l={isOrgAdmin:(null===(a=null===(o=null==c?void 0:c.identity)||void 0===o?void 0:o.user)||void 0===a?void 0:a.is_org_admin)||!1},[4,null===(i=null==s?void 0:s.chrome)||void 0===i?void 0:i.getUserPermissions(e,t)];case 2:return[2,(l.permissions=u.sent()||null,l)]}}))},new((l=void 0)||(l=Promise))((function(e,t){function n(e){try{o(u.next(e))}catch(e){t(e)}}function r(e){try{o(u.throw(e))}catch(e){t(e)}}function o(t){var o;t.done?e(t.value):(o=t.value,o instanceof l?o:new l((function(e){e(o)}))).then(n,r)}o((u=u.apply(s,c||[])).next())}))}function a(e){return"object"==typeof e}function i(e,t){return!!e&&e.some((function(e){return t.includes(a(e)?null==e?void 0:e.permission:e)}))}function s(e,t){return!!e&&t.every((function(t){return e.some((function(e){var n,r=(null===(n=a(e)?null==e?void 0:e.permission:e)||void 0===n?void 0:n.split(":"))||[],o=t.split(":");return r.slice(0).reduce((function(e,t,n,r){return!1===e?(r.splice(n),e):"*"===t||t===(null==o?void 0:o[n])}),!0)||r.join(":")===t}))}))}var c={isLoading:!0,isOrgAdmin:!1,permissions:[]},l=(0,r.createContext)(c);const u=o},85333:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(93264),o=n.n(r),a=n(14938),i=n(52017),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},c=function(){return o().createElement(o().Fragment,null,"Contact your organization administrator(s) for more information or visit ",o().createElement("a",{href:"./settings/my-user-access"},"My User Access"),"  to learn more about your permissions.")};const l=function(e){var t=e.prevPageButtonText,n=void 0===t?"Return to previous page":t,r=e.toLandingPageText,l=void 0===r?"Go to landing page":r,u=e.title,m=e.actions,f=void 0===m?null:m,y=e.serviceName,v=e.icon,p=void 0===v?i.LockIcon:v,d=e.description,h=void 0===d?o().createElement(c,null):d,g=e.showReturnButton,b=void 0===g||g,S=e.className,w=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["prevPageButtonText","toLandingPageText","title","actions","serviceName","icon","description","showReturnButton","className"]),E=u||"You do not have access to ".concat(y);return o().createElement(a.EmptyState,s({variant:a.EmptyStateVariant.full,className:"ins-c-not-authorized ".concat(S||"")},w),o().createElement(a.EmptyStateIcon,{icon:p}),o().createElement(a.Title,{headingLevel:"h5",size:"lg"},E),o().createElement(a.EmptyStateBody,null,h),f,b&&(document.referrer?o().createElement(a.Button,{variant:"primary",onClick:function(){return history.back()}},n):o().createElement(a.Button,{variant:"primary",component:"a",href:"."},l)))}},10984:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>j});var r=n(4942),o=n(57149),a=n(28191),i=n(92298),s=n(93264),c=n.n(s),l=n(98756),u=n(47173),m=n(37486),f=n(90098),y=n(85333),v=n(52564),p=n(75824),d=n(91727),h=n(45697),g=n.n(h),b=function(e){var t=e.data,n=e.dataSize,r=e.percentageData,o=e.iconTooltipText;return c().createElement("div",null,c().createElement("span",{className:"insd-c-dashboard__number-data--".concat(n)},t),r&&c().createElement("span",{className:"insd-c-dashboard__number-percentage"},c().createElement("span",null,r),c().createElement(p.u,{key:"".concat(o),position:p.D.top,content:c().createElement("div",null,o)},c().createElement(u.zx,{variant:"plain","aria-label":"Action",className:"insd-c-info-icon"},c().createElement(d.Z,null)))))};b.propTypes={data:g().any,dataSize:g().string,linkDescription:g().string,percentageData:g().string,iconTooltipText:g().node};var S=function(e){var t=e.data,n=e.dataSize,r=e.link,o=e.linkDescription,s=e.layout,l=e.critical,m=e.iconTooltipText;return c().createElement("div",{className:"".concat(s?"pf-m-".concat(s):"")},"true"===l&&c().createElement(v.Z,null),c().createElement(a.k,{direction:{default:"column"},spaceItems:{default:"spaceItemsXs"}},c().createElement(i.B,null,c().createElement(b,{data:t,dataSize:n,iconTooltipText:m})),c().createElement(i.B,null,c().createElement(u.zx,{component:"a",isInline:!0,variant:"link",href:r},o))))};S.propTypes={data:g().any,dataSize:g().string,percentageData:g().string,link:g().any,linkDescription:g().string,layout:g().string,critical:g().string,iconTooltipText:g().node,flexDirection:g().object};var w=n(59303),E=n(28216),O=n(30893),I=n(86896),x=n(31876);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){var t=e.fetchInventory,n=e.inventoryFetchStatus,r=e.inventorySummary,o=e.fetchInventoryStale,v=e.inventoryStaleFetchStatus,p=e.inventoryStaleSummary,d=e.fetchInventoryWarning,h=e.inventoryWarningFetchStatus,g=e.inventoryWarningSummary,b=e.fetchInventoryTotal,E=e.inventoryTotalFetchStatus,k=(e.inventoryTotalSummary,e.selectedTags),P=e.workloads,j=e.SID,A=(0,x.usePermissions)("inventory",["inventory:*:*","inventory:*:read","inventory:hosts:*","inventory:hosts:read"]).hasAccess;(0,s.useEffect)((function(){var e=T(T({},(0,l.Rm)(P,j)),(null==k?void 0:k.length)>0&&{tags:k});b(e),t(e),o(e),d(e)}),[b,t,o,d,k,P,j]);var _=(0,I.Z)();return c().createElement(c().Fragment,null,!1===A?c().createElement(y.Z,{showReturnButton:!1,serviceName:"Inventory",icon:function(){return""},variant:"xs",description:c().createElement("div",null,_.formatMessage(O.Z.systemInventoryNoAccess))}):c().createElement(a.k,{spaceItems:{md:"spaceItemsXl"},alignItems:{md:"alignItemsCenter"},direction:{default:"column",md:"row"}},c().createElement(a.k,{spaceItems:{default:"spaceItemsXl"}},"fulfilled"===n&&"fulfilled"===E&&c().createElement(S,{data:r.total.toLocaleString()||0,dataSize:"lg",linkDescription:_.formatMessage(O.Z.systemInventoryDescription,{count:r.total||0}),link:"./insights/inventory/?source=puptoo"})),c().createElement(a.k,{spaceItems:{default:"spaceItemsXl"},alignItems:{md:"alignItemsCenter"},flex:{default:"flex_1"},direction:{default:"column",md:"row"}},c().createElement(a.k,{direction:{default:"column"},spaceItems:{default:"spaceItemsNone"}},c().createElement(i.B,null,"fulfilled"===v&&c().createElement(u.zx,{component:"a",variant:"link",href:"./insights/inventory/?status=stale&source=puptoo",isInline:!0},c().createElement(f.w,{message:_.formatMessage(O.Z.systemInventoryStale,{count:p.total||0}),state:"warning",systemInventory:!0}))),c().createElement(i.B,null,"fulfilled"===h&&c().createElement(u.zx,{component:"a",variant:"link",href:"./insights/inventory/?status=stale_warning&source=puptoo",isInline:!0},c().createElement(f.w,{message:_.formatMessage(O.Z.systemInventoryStaleWarning,{count:g.total||0}),state:"critical",systemInventory:!0}))),"rejected"===E&&c().createElement(m.Z,{appName:"Inventory",isSmall:!0})),c().createElement(i.B,{align:{md:"alignRight"}},c().createElement(u.zx,{className:"pf-u-mr-sm pf-u-font-size-md",component:"a",variant:"secondary",isSmall:!0,href:"settings/integrations"},_.formatMessage(O.Z.configureIntegrations)),c().createElement(u.zx,{component:"a",variant:"primary",href:"".concat(w.Pu,"/registration")},_.formatMessage(O.Z.systemInventoryCTA))))))};P.propTypes={fetchInventory:g().func,inventorySummary:g().object,inventoryFetchStatus:g().string,fetchInventoryStale:g().func,inventoryStaleSummary:g().object,inventoryStaleFetchStatus:g().string,fetchInventoryWarning:g().func,inventoryWarningSummary:g().object,inventoryWarningFetchStatus:g().string,fetchInventoryTotal:g().func,inventoryTotalSummary:g().object,inventoryTotalFetchStatus:g().string,intl:g().any,selectedTags:g().arrayOf(g().string),workloads:l.ib,SID:g().arrayOf(g().string)};const j=(0,E.$j)((function(e){var t=e.DashboardStore;return{inventorySummary:t.inventorySummary,inventoryFetchStatus:t.inventoryFetchStatus,inventoryStaleSummary:t.inventoryStaleSummary,inventoryStaleFetchStatus:t.inventoryStaleFetchStatus,inventoryWarningSummary:t.inventoryWarningSummary,inventoryWarningFetchStatus:t.inventoryWarningFetchStatus,inventoryTotalSummary:t.inventoryTotalSummary,inventoryTotalFetchStatus:t.inventoryTotalFetchStatus,selectedTags:t.selectedTags,workloads:t.workloads,SID:t.SID}}),(function(e){return{fetchInventory:function(t){return e(o.r7(t))},fetchInventoryStale:function(t){return e(o.n(t))},fetchInventoryWarning:function(t){return e(o.Qo(t))},fetchInventoryTotal:function(t){return e(o.nB(t))}}}))(P)},45467:()=>{},49854:()=>{}}]);
//# sourceMappingURL=../sourcemaps/1282.c28c9871b9f6dbcc9165d10f436ec7a4.js.map