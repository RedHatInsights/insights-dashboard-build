(self.webpackChunkinsights_dashboard=self.webpackChunkinsights_dashboard||[]).push([[6786],{76786:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>H});var n=a(96156),r=(a(84157),a(57149)),i=a(93264),s=a.n(i),o=a(66794),l=a(47173),c=a(10358),d=a(37486),u=a(45697),m=a.n(u),f=(a(71870),a(9947)),p=a(75106),h=a(60485),g=a(30893),v=a(86896),b=function(){var e=(0,v.Z)();return s().createElement(f.u,{variant:f.I.small},s().createElement(h.D,{headingLevel:"h6",size:"md"},e.formatMessage(g.Z.remediationsNoDataTitle)),s().createElement(p.B,null,e.formatMessage(g.Z.remediationsNoDataBody)))};b.propTypes={intl:m().any};var _=a(92137),E=a(28481),y=a(87757),x=a.n(y),Z=(a(97628),a(88596)),k=a(71094),S=a(68778),N=a(94768),O=(a(96327),a(73479));const P=function(){return s().createElement(O.ZP,{className:"ins-c-dashboard__icon-question"})};var w=a(59303),j=(a(17083),function(e){var t=e.timestamp;return s().createElement("p",{className:"ins-c-dashboard__time-stamp"},t)});j.propTypes={timestamp:m().string};const F=j;var z=a(72781),D=a(35224),R=function(e){return{running:"running",pending:"running",acked:"running",failure:"failure",canceled:"failure",success:"success"}[e]},I="ins-c-remediation__status-icon",M=function(e){var t,a=e.id,n=e.name,r=e.index,o=(0,i.useState)({}),c=(0,E.Z)(o,2),d=c[0],u=c[1],m=(0,i.useState)(),f=(0,E.Z)(m,2),p=f[0],h=f[1],b=(0,i.useState)(),y=(0,E.Z)(b,2),O=y[0],j=y[1],M=(0,i.useState)(!1),T=(0,E.Z)(M,2),A=T[0],C=T[1],B=(0,v.Z)();return(0,i.useEffect)((function(){!function(){var e=(0,_.Z)(x().mark((function e(){var t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.Z.get("".concat(w.X9).concat(a,"/playbook_runs?limit=1&offset=0&sort=-updated_at"));case 3:t=e.sent,u(t.data.data),j(!0),h(t.data.data.length),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(0),j(!1),h(!1),C(!0),console.error("Error contacting remediations API");case 15:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}()()}),[a]),s().createElement("div",{className:"ins-c-remediations-container"},s().createElement("div",{className:"ins-c-remediation__status"},void 0===O&&s().createElement(Z.Skeleton,{size:"md"}),O&&p?s().createElement(s().Fragment,null,(t=R(d[0].status),{running:s().createElement(N.ZP,{className:"".concat(I," ").concat(I,"--running"),"aria-label":"Remediation in progress"}),success:s().createElement(S.ZP,{className:"".concat(I," ").concat(I,"--passed"),"aria-label":"Remediation passed"}),failure:s().createElement(z.ZP,{className:"".concat(I," ").concat(I,"--failed"),"aria-label":"Remediation failed"})}[t]),s().createElement("p",{className:"ins-c-remediation__status-text"},B.formatMessage(g.Z.remediationsPlaybookStatus,{status:R(d[0].status)}))):null,O&&!p&&s().createElement(s().Fragment,null,s().createElement(P,null),s().createElement("p",null,B.formatMessage(g.Z.remediationsPlaybookNoActivity))),A&&s().createElement(s().Fragment,null,s().createElement("span",null,B.formatMessage(g.Z.remediationsPlaybookFailure))," ")),s().createElement("div",{className:"ins-c-remediation__timestamp"},n.length>65?s().createElement(D.u,{content:n},s().createElement(l.zx,{id:"remediation-link-".concat(r),component:"a",variant:"link",isInline:!0,href:"./insights/remediations/".concat(a)},n)):s().createElement(l.zx,{id:"remediation-link-".concat(r),component:"a",variant:"link",isInline:!0,href:"./insights/remediations/".concat(a)},n),void 0===O&&s().createElement(Z.Skeleton,{size:"md"}),O&&p?s().createElement(F,{timestamp:s().createElement(Z.DateFormat,{type:"exact",date:d[0].created_at})}):null))};M.propTypes={id:m().string,name:m().string,intl:m().any,index:m().any};const T=M;var A=a(77121),C=a(36873);function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var q=function(e){var t=e.fetchRemediations,a=e.remediationsFetchStatus,n=e.remediations,r=(0,v.Z)();return(0,i.useEffect)((function(){t()}),[t]),s().createElement(c.t,{appName:"remediations",className:"ins-c-card__remediations ins-m-toggle-right-on-md",title:r.formatMessage(g.Z.remediationsCardHeader),isExpanded:JSON.parse(localStorage.getItem("dashboard_expanded_remediations")||"true"),isExpandedCallback:function(e){return localStorage.setItem("dashboard_expanded_remediations",e)},header:s().createElement(o.KZ,null),body:s().createElement(o.jA,null,"fulfilled"===a&&Array.isArray(n.data)&&(n.data.length>0?s().createElement(s().Fragment,null,n.data.map((function(e,t){return s().createElement(T,{id:e.id,name:e.name,key:e.id,index:t+1})})),n.meta.total>n.meta.count&&s().createElement("div",{className:"ins-c-remediations-container"},s().createElement("div",{className:"ins-c-remediation__status"}),s().createElement("div",{className:"ins-c-remediation__timestamp"},s().createElement(l.zx,{id:"remediations-link-more",component:"a",href:"./insights/remediations",variant:"link",isInline:!0},r.formatMessage(g.Z.remediationsTotal,{total:n.meta.total-n.meta.count}))))):s().createElement(b,null)),"rejected"===a&&s().createElement(d.Z,{appName:"Remediations"}))})};q.propTypes={fetchRemediations:m().func,remediations:m().object,remediationsFetchStatus:m().string,intl:m().any};const H=(0,C.Z)((0,A.connect)((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({remediations:e.DashboardStore.remediations,remediationsFetchStatus:e.DashboardStore.remediationsFetchStatus},t)}),(function(e){return{fetchRemediations:function(){return e(r.y7())}}}))(q))},16062:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".dashboard .ins-c-dashboard__time-stamp{color:var(--pf-global--disabled-color--100);font-size:var(--pf-global--FontSize--sm)}\n",""]);const i=r},29021:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".dashboard .ins-c-remediations-container{display:flex;flex-direction:row}.dashboard .ins-c-remediations-container:not(:last-child){padding-bottom:var(--pf-global--spacer--md)}.dashboard .ins-c-remediation__status{display:flex;flex-direction:row;padding-top:2px;padding-right:16px;min-width:110px}.dashboard .ins-c-remediation__status>p{margin-left:var(--pf-global--spacer--sm);font-size:var(--pf-global--FontSize--sm)}\n",""]);const i=r},11195:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".dashboard .ins-c-dashboard__card--Remediations .pf-c-empty-state{margin-left:auto;margin-right:auto}\n",""]);const i=r},38700:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".dashboard .ins-c-remediation__status-icon--passed{color:var(--pf-global--success-color--200)}.dashboard .ins-c-remediation__status-icon--failed{color:var(--pf-global--danger-color--100)}.dashboard .ins-c-remediation__status-icon--running{color:var(--pf-global--default-color--300)}.dashboard .ins-c-remediation__status-text{text-transform:capitalize}.dashboard .ins-c-remediation__timestamp{text-overflow:ellipsis;overflow:hidden}\n",""]);const i=r},17083:(e,t,a)=>{"use strict";var n=a(93379),r=a.n(n),i=a(16062),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(16062,(t=>{i=a(16062),function(e,t,a){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},84157:(e,t,a)=>{"use strict";var n=a(93379),r=a.n(n),i=a(29021),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(29021,(t=>{i=a(29021),function(e,t,a){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},71870:(e,t,a)=>{"use strict";var n=a(93379),r=a.n(n),i=a(11195),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(11195,(t=>{i=a(11195),function(e,t,a){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals},97628:(e,t,a)=>{"use strict";var n=a(93379),r=a.n(n),i=a(38700),s=r()(i.default,{insert:"head",singleton:!1});if(!i.default.locals||e.hot.invalidate){var o=i.default.locals;e.hot.accept(38700,(t=>{i=a(38700),function(e,t,a){if(!e&&t||e&&!t)return!1;var n;for(n in e)if(e[n]!==t[n])return!1;for(n in t)if(!e[n])return!1;return!0}(o,i.default.locals)?(o=i.default.locals,s(i.default)):e.hot.invalidate()}))}e.hot.dispose((function(){s()})),i.default.locals}}]);