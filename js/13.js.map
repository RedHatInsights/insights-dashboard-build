{"version":3,"sources":["webpack:///./src/SmartComponents/Advisor/Constants.js","webpack:///./src/SmartComponents/Advisor/StackChart.js","webpack:///./src/SmartComponents/Advisor/Advisor.js"],"names":["SEVERITY_MAP","critical","important","moderate","low","StackChart","data","intl","chartData","name","formatMessage","messages","y","colorScale","global_palette_red_200","value","global_palette_orange_300","global_palette_gold_400","global_palette_gold_300","legendData","map","item","symbol","type","Fragment","Chart","ariaDesc","ariaTitle","padding","left","right","bottom","top","width","legendPosition","height","maxWidth","legendComponent","ChartLegend","events","target","eventHandlers","onClick","mutation","risk","datum","split","toLowerCase","window","location","href","UI_BASE","onMouseOver","style","Object","assign","cursor","orientation","ChartAxis","axisComponent","ChartStack","horizontal","ChartBar","key","barWidth","labelComponent","ChartTooltip","text","constrainToVisibleArea","x","label","propTypes","PropTypes","object","any","injectIntl","Advisor","recStats","recStatsStatus","advisorFetchStatsRecs","advisorFetchStatsSystems","advisorIncidents","advisorIncidentsStatus","advisorFetchIncidents","useEffect","TemplateCard","appName","title","Loading","className","meta","count","incidentsDetected","incidents","total_risk","func","string","systemsStats","systemsStatsStatus","connect","DashboardStore","advisorStatsRecs","advisorStatsRecsStatus","advisorStatsSystems","advisorStatsSystemsStatus","dispatch","url","AppActions"],"mappings":"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","file":"js/13.js","sourcesContent":["export const INCIDENT_URL = `/advisor/recommendations?reports_shown=undefined&impacting=false&offset=0&limit=10&sort=-publish_date&incident=true`;\nexport const NEW_REC_URL = `/advisor/recommendations?reports_shown=undefined&impacting=false&offset=0&limit=10&sort=-publish_date`;\n\nexport const SEVERITY_MAP = {\n    critical: 4,\n    important: 3,\n    moderate: 2,\n    low: 1\n};\n","/* eslint-disable camelcase */\nimport { Chart, ChartAxis, ChartBar, ChartLegend, ChartStack, ChartTooltip } from '@patternfly/react-charts';\nimport { global_palette_gold_300, global_palette_gold_400, global_palette_orange_300, global_palette_red_200 } from '@patternfly/react-tokens';\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SEVERITY_MAP } from './Constants';\nimport { UI_BASE } from '../../AppConstants';\nimport { injectIntl } from 'react-intl';\nimport messages from '../../Messages';\n\nconst StackChart = ({ data, intl }) => {\n    const chartData = [\n        { name: intl.formatMessage(messages.critical), y: data[SEVERITY_MAP.critical] },\n        { name: intl.formatMessage(messages.important), y: data[SEVERITY_MAP.important] },\n        { name: intl.formatMessage(messages.moderate), y: data[SEVERITY_MAP.moderate] },\n        { name: intl.formatMessage(messages.low), y: data[SEVERITY_MAP.low] }];\n    const colorScale = [\n        global_palette_red_200.value,\n        global_palette_orange_300.value,\n        global_palette_gold_400.value,\n        global_palette_gold_300.value\n    ];\n    const barWidth = 22;\n    const legendData = chartData.map(item => ({ name: `${item.y} ${item.name}`, symbol: { type: null } }));\n    const legendClick = () => [{\n        target: 'labels',\n        mutation: (data) => {\n            const risk = data.datum.name.split(' ')[1].toLowerCase();\n            window.location.href =\n                `${UI_BASE}/advisor/recommendations?total_risk=${SEVERITY_MAP[risk]}&reports_shown=true&impacting=true&offset=0&limit=10`;\n        }\n    }];\n    const labelComponent = () => <ChartTooltip text={ ({ datum }) => `${datum.name}: ${datum.y}` } constrainToVisibleArea />;\n\n    return <React.Fragment>\n        <Chart\n            ariaDesc='Advisor recommendations by severity'\n            ariaTitle='Advisor recommendations by severity'\n            padding={ { left: 0, right: 0, bottom: 56, top: 20 } }\n            width={ 500 }\n            legendPosition='bottom-left'\n            height={ 110 }\n            maxWidth={ 600 }\n            legendComponent={ <ChartLegend\n                data={ legendData }\n                width={ 400 }\n                events={ [{\n                    target: 'labels', eventHandlers: {\n                        onClick: legendClick,\n                        onMouseOver: () => {\n                            return [{\n                                mutation: (data) => {\n                                    return {\n                                        style: Object.assign({}, data.style, { cursor: 'pointer' })\n                                    };\n                                }\n                            }];\n                        }\n                    }\n                }] }\n                orientation='horizontal'\n                colorScale={ colorScale }\n            /> }\n        >\n            <ChartAxis axisComponent={ <React.Fragment /> } />\n            <ChartStack horizontal\n                colorScale={ colorScale }>\n                {chartData.map(item => <ChartBar key={ item }\n                    barWidth={ barWidth } labelComponent={ labelComponent() }\n                    data={ [{ name: item.name, y: item.y, x: 1, label: item.name }] }\n                />)}\n            </ChartStack>\n        </Chart>\n    </React.Fragment>;\n};\n\nStackChart.propTypes = {\n    data: PropTypes.object,\n    intl: PropTypes.any\n};\n\nexport default injectIntl(StackChart);\n","import * as AppActions from '../../AppActions';\n\nimport React, { useEffect } from 'react';\nimport { TemplateCard, TemplateCardBody, TemplateCardHeader } from '../../PresentationalComponents/Template/TemplateCard';\n\nimport ExclamationCircleIcon from '@patternfly/react-icons/dist/js/icons/exclamation-circle-icon';\nimport { INCIDENT_URL } from './Constants';\nimport Loading from '../../PresentationalComponents/Loading/Loading';\nimport PropTypes from 'prop-types';\nimport StackChart from './StackChart';\nimport { UI_BASE } from '../../AppConstants';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport messages from '../../Messages';\n\n/**\n * Advisor Card for showing count/severity of rec hits\n */\nconst Advisor = ({ recStats, recStatsStatus, advisorFetchStatsRecs, advisorFetchStatsSystems,\n    advisorIncidents, advisorIncidentsStatus, advisorFetchIncidents, intl }) => {\n\n    useEffect(() => {\n        advisorFetchStatsRecs();\n        advisorFetchStatsSystems();\n        advisorFetchIncidents();\n    }, [advisorFetchIncidents, advisorFetchStatsRecs, advisorFetchStatsSystems]);\n\n    return <TemplateCard appName='Advisor'>\n        <TemplateCardHeader title='Advisor recommendations' />\n        <TemplateCardBody>\n            {advisorIncidentsStatus !== 'fulfilled' ? <Loading /> :\n                <div className='ins-c-summary'>\n                    <ExclamationCircleIcon className='ins-c-summary__icon ins-c-summary__icon-critical' />\n                    <span className='ins-c-summary__emphasis'>{advisorIncidents.meta.count}</span>\n                    <span className='ins-c-summary__label'>\n                        <a href={ `${UI_BASE}${INCIDENT_URL}` }>\n                            {intl.formatMessage(messages.incidentsDetected, { incidents: advisorIncidents.meta.count })}\n                        </a>\n                    </span>\n                </div>\n            }\n            {recStatsStatus !== 'fulfilled' ? <Loading /> : <StackChart data={ recStats.total_risk } />}\n        </TemplateCardBody>\n    </TemplateCard>;\n};\n\nAdvisor.propTypes = {\n    advisorFetchStatsRecs: PropTypes.func,\n    recStats: PropTypes.object,\n    recStatsStatus: PropTypes.string,\n    advisorFetchStatsSystems: PropTypes.func,\n    systemsStats: PropTypes.object,\n    systemsStatsStatus: PropTypes.string,\n    advisorIncidents: PropTypes.object,\n    advisorIncidentsStatus: PropTypes.string,\n    advisorFetchIncidents: PropTypes.func,\n    intl: PropTypes.any\n};\n\nexport default injectIntl(connect(\n    ({ DashboardStore }) => ({\n        recStats: DashboardStore.advisorStatsRecs,\n        recStatsStatus: DashboardStore.advisorStatsRecsStatus,\n        systemsStats: DashboardStore.advisorStatsSystems,\n        systemsStatsStatus: DashboardStore.advisorStatsSystemsStatus,\n        advisorIncidents: DashboardStore.advisorIncidents,\n        advisorIncidentsStatus: DashboardStore.advisorIncidentsStatus\n    }),\n    dispatch => ({\n        advisorFetchStatsRecs: (url) => dispatch(AppActions.advisorFetchStatsRecs(url)),\n        advisorFetchStatsSystems: (url) => dispatch(AppActions.advisorFetchStatsSystems(url)),\n        advisorFetchIncidents: (url) => dispatch(AppActions.advisorFetchIncidents(url))\n    })\n)(Advisor));\n"],"sourceRoot":""}