"use strict";(self.webpackChunkinsights_dashboard=self.webpackChunkinsights_dashboard||[]).push([[4988],{33818:(e,t,a)=>{a.d(t,{u:()=>u});var r=a(45987),n=a(10310),s=a(80469),i=a(33101),c=a(93264),l=a.n(c),o=a(45697),d=a.n(o),m=["index"],u=function(e){var t=e.ariaDesc,a=e.ariaTitle,c=e.constrainToVisibleArea,o=e.data,d=e.legendData,u=e.padding,h=e.height,f=e.width,p=e.legendOrientation,g=e.colorScale,y=e.legend,b=e.legendWidth,v=e.legendHeight,E=e.legendClick,_=function(e){var t=e.index,s=(0,r.Z)(e,m);return l().createElement("a",{id:"".concat(a.toLowerCase().replace(/\s/g,"-"),"-legend-").concat(t+1),href:E[t],className:"pf-c-button pf-m-link pf-m-inline"},l().createElement(n.Df,s))};return l().createElement("div",{className:"insd-c-pie-chart__row"},l().createElement("div",{style:{width:f,height:h,position:"relative"}},l().createElement(i.Td,{ariaDesc:t,ariaTitle:a,constrainToVisibleArea:c,data:o,height:h,labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},padding:u,width:f,colorScale:g}),l().createElement("table",{tabIndex:"0",className:"visually-hidden","aria-label":a+" data"},l().createElement("tbody",null,o.map((function(e,t){return[l().createElement("tr",{key:t},l().createElement("td",null,e.y),l().createElement("td",null,e.x))]}))))),y&&l().createElement("div",{className:"insd-c-pie-chart__legend","aria-label":"Chart legend",style:{width:b,height:v}},l().createElement(s.Qk,{height:v,width:b,fontSize:14,data:d,rowGutter:{top:-5,bottom:-5},orientation:p,labelComponent:E&&l().createElement(_,null)})))};u.propTypes={ariaDesc:d().string,ariaTitle:d().string,constrainToVisibleArea:d().bool,data:d().array,legendData:d().array,padding:d().object,height:d().number,width:d().number,legendOrientation:d().string,colorScale:d().array,legend:d().bool,legendWidth:d().number,legendHeight:d().number,legendClick:d().any}},54988:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var r=a(4942),n=a(28191),s=a(93264),i=a.n(s),c=a(66794),l=a(98756),o=a(57149),d=a(10358),m=a(37486),u=a(46891),h=a(33818),f=a(45697),p=a.n(f),g=a(55490),y=a(34925),b=a(1900),v=a(28216),E=a(96191),_=a(30893),S=a(86896),w=a(92397);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Z(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var k=function(e){var t=e.systems,a=e.systemsStatus,r=e.fetchSystems,o=e.advisories,f=e.advisoriesStatus,p=e.fetchAdvisories,v=e.selectedTags,O=e.workloads,k=e.SID,D=(0,S.Z)(),x=[a,f].every((function(e){return"fulfilled"===e})),N=o||{},T=N.security,j=N.bugfix,A=N.enhancement,P=[{x:D.formatMessage(_.Z.securityAdvisories,{count:T}),y:T,fill:b.Z.value,url:"/advisories?offset=0&filter%5Badvisory_type_name%5D=security"},{x:D.formatMessage(_.Z.bugfixAdvisories,{count:j}),y:j,fill:y.Z.value,url:"/advisories?offset=0&filter%5Badvisory_type_name%5D=bugfix"},{x:D.formatMessage(_.Z.enhancementAdvisories,{count:A}),y:A,fill:g.Z.value,url:"/advisories?offset=0&filter%5Badvisory_type_name%5D=enhancement"}],C=[g.Z.value,y.Z.value,b.Z.value];return(0,s.useEffect)((function(){var e=Z(Z({},(0,l.Rm)(O,k)),(null==v?void 0:v.length)>0&&{tags:v});r(e),p(e)}),[r,p,O,k,v]),"rejected"===a?i().createElement(c.wh,{appName:"PatchManager",className:"insd-c-dashboard__card--Patch"},i().createElement(c.ME,{subtitle:D.formatMessage(_.Z.patchTitle)}),i().createElement(c.jA,null,i().createElement(m.Z,{appName:"Patch",isSmall:!0}))):i().createElement(d.t,{appName:"PatchManager",isExpanded:JSON.parse(localStorage.getItem("dashboard_expanded_patch")||"true"),isExpandedCallback:function(e){return localStorage.setItem("dashboard_expanded_patch",e)},title:D.formatMessage(_.Z.patchTitle),className:"insd-c-dashboard__card--Patch insd-m-toggle-right-on-md",body:i().createElement(c.jA,null,x?i().createElement(n.k,{direction:{default:"column"}},i().createElement(w.Z,{app:"patch",to:"/systems",className:"pf-c-button pf-m-link pf-m-inline"},i().createElement("span",null,D.formatMessage(_.Z.systemsAffected,{count:t}))),i().createElement("div",{className:"insd-c-dashboard__card-chart-container"},i().createElement("div",{className:"insd-c-dashboard__card-pie-chart"},i().createElement(h.u,{colorScale:x&&0===T&&0===j&&0===A?[E.Z.value]:C,ariaDesc:"Patch systems chart",ariaTitle:"Patch systems chart",constrainToVisibleArea:!0,data:P,labels:function(e){var t=e.datum;return"".concat(t.x,": ").concat(t.y)},padding:{bottom:0,left:0,right:0,top:0}})),i().createElement("div",{className:"insd-c-dashboard__card-pie-chart-legend"},i().createElement("div",{className:"insd-c-legend"},P.map((function(e,t){return i().createElement(w.Z,{app:"patch",key:e.url,to:e.url,className:"insd-c-legend__item"},i().createElement("span",{className:"insd-c-legend__dot",style:{"--insd-c-legend__dot--BackgroundColor":"".concat(C[t])}}),i().createElement("span",{className:"insd-c-legend__text"},e.y," ",(0,l.kC)(e.x)))})))))):i().createElement(u.Z,null))})};k.propTypes={systems:p().any,systemsStatus:p().string,fetchSystems:p().func,advisories:p().any,advisoriesStatus:p().string,fetchAdvisories:p().func,selectedTags:p().arrayOf(p().string),workloads:l.ib,SID:p().arrayOf(p().string)};const D=(0,v.$j)((function(e){var t=e.DashboardStore;return{systems:t.patchmanSystems,systemsStatus:t.patchmanSystemsStatus,advisories:t.patchmanAdvisories,advisoriesStatus:t.patchmanAdvisoriesStatus,selectedTags:t.selectedTags,workloads:t.workloads,SID:t.SID}}),(function(e){return{fetchSystems:function(t){return e((0,o.Zw)(t))},fetchAdvisories:function(t){return e((0,o.cL)(t))}}}))(k)}}]);
//# sourceMappingURL=../sourcemaps/4988.299e36a4b3ce3f85573d09eee252a716.js.map